pipeline {
    agent any

    stages {

        stage('Compiling Stage'){
            steps{
                echo "Pipeline Started Successfully"
               
                echo "Compilation done successfully!"
            }
        }
        stage('Testing Stage'){
            steps{
                echo "Entered Testing Stage"
                bat 'python test.py'
             
                echo "Unit Test done successfully!"
            }
        }

        stage('Final Confirmation'){
                    steps{
                        echo "Entered Confirmation Stage"
                        bat 'python run_tests.py'
                        echo "That is the result of testing"
                    }
                }
           stage('Building Docker Image'){
            steps{
                echo "Building Docker Image"
                bat 'docker image build -t urlshort .'
                echo "Image Built Successfully"
            }
        }
        

        stage('Running Docker Image'){
                    steps{
                        echo "Runningg Docker Image"
                        bat 'docker run -p 5000:5000 -d urlshort'
                        echo "Image Ran Successfully"
                    }
                    }

      


        stage('Terminate Stage'){
             steps{
                echo "Pipeline Terminated successfully!"
    }
    }
}
}
